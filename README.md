# Text Embedding and Similarity Check

This project demonstrates how to extract text embeddings from a PDF file and find the most relevant document pages based on user questions using cosine similarity. The project consists of two main scripts: `prep.py` and `main.py`.

- `prep.py`: Extracts text from the PDF file, generates embeddings, and saves them in a JSON file.
- `main.py`: Loads the JSON file, processes user queries, and returns the most relevant document page using cosine similarity.

## Prerequisites

Python version 3.7 or higher.

## Installation

1. Clone this repository to your local machine:
   ```bash
   git clone https://github.com/fataelislami/Text-Embedding.git
   cd Text-Embedding
   ```

2. Install all required dependencies using pip. It is recommended to use a virtual environment to manage dependencies:

    ```bash
    python -m venv env  # Create a virtual environment
    source env/bin/activate  # Activate the virtual environment (for macOS/Linux)
    # or
    .\env\Scripts\activate  # Activate the virtual environment (for Windows)

    pip install -r requirements.txt  # Install all dependencies from the requirements.txt file
    ```

## How to play

### 1. Create Embeddings from PDF (Run `prep.py`)
The first step is to extract text from the PDF file and generate text embeddings. You need to adjust the `pdf_file_path` and `output_json_path` variables inside the `prep.py` file according to the PDF file location and the desired JSON file name.

To run the script:

```bash
python prep.py
```

This script will read the PDF file, generate embeddings for each page, and save the results in a JSON file.

### 2. Process User Queries and Check Similarity (Run `main.py`)
After generating embeddings, you can run the `main.py` script to process user queries. Ensure that the `embeddings_file` variable inside `main.py` points to the JSON file generated by `prep.py`.

To run the script:

```bash
python main.py
```

This script will accept user queries (e.g., "When did Indonesia gain independence?"), and return the most relevant page based on cosine similarity.

## Files

- `main.py`: Contains the code to process user queries and calculate cosine similarity.
- `prep.py`: Contains the code to extract text from the PDF and generate text embeddings.
- `requirements.txt`: A list of required Python packages.

## Dependencies

This project uses several Python libraries:

- `numpy`: For mathematical operations like cosine similarity.
- `sentence-transformers`: To generate text embeddings.
- `pymupdf (fitz)`: To extract text from PDF files.

## Notes

- You will need a PDF file to generate embeddings in the first step. Ensure that the path to the PDF file is correctly set in the `pdf_file_path` variable in `prep.py`.
- The model used to generate embeddings is `intfloat/multilingual-e5-large`. You can replace this model with another one if needed by modifying the `model` parameter in both scripts.
